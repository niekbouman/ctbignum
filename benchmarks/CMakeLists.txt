add_executable(bench src/bench.cpp)

set_target_properties(bench PROPERTIES
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
)

if( NOT CMAKE_BUILD_TYPE )
  set( CMAKE_BUILD_TYPE Release CACHE STRING
       "Choose the type of build, options are: None Debug Release RelWithDebInfo
MinSizeRel."
       FORCE )

  message("Setting CMAKE_BUILD_TYPE to ${CMAKE_BUILD_TYPE}")
   
endif()

find_package(GMP REQUIRED)
find_package(NTL REQUIRED)
find_package(Benchmark REQUIRED)


# optimizations for libff
add_definitions(-DUSE_ASM)
add_definitions(-DNDEBUG)
set(
    CMAKE_CXX_FLAGS
    "${CMAKE_CXX_FLAGS} -save-temps" #-flto=thin -S"
)
set(
   CMAKE_EXE_LINKER_FLAGS
   "${CMAKE_EXE_LINKER_FLAGS} " #-flto=thin"
)


target_include_directories(bench PRIVATE ${NJBOUMAN_CTBIGNUM_INCLUDE_BUILD_DIR} ${Benchmark_INCLUDES} ${NTL_INCLUDES} ${GMP_INCLUDES})
target_link_libraries(bench ${Benchmark_LIBRARIES}  ${NTL_LIBRARIES} ${GMP_LIBRARIES})
